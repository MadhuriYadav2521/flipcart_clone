<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Shopping Site for Mobile, Electronics And Many More</title>
    <link rel="icon" type="image/x-icon" href="./img/fav.jpg">
    <link rel="stylesheet" href="./style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/8cfedbae53.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="screen">
        <div class="navbar-wrapper">
            <div class="navbar-container">
                <div class="logo-wrapper" onclick="window.location.href='./index.html'">
                    <div class="logo-img">
                        <img src="https://static-assets-web.flixcart.com/fk-p-linchpin-web/fk-cp-zion/img/flipkart-plus_8d85f4.png"
                            alt="">
                    </div>
                    <div class="logo-txt">
                        <span>explore</span>
                        <span>plus</span>
                        <span class="logo-small-img">
                            <img src="https://static-assets-web.flixcart.com/fk-p-linchpin-web/fk-cp-zion/img/plus_aef861.png"
                                alt="">
                        </span>
                    </div>
                </div>
                <div class="search-wrapper">
                    <input type="text" placeholder="Search for products, brands & many more">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </div>
                <div class="right-nav-wrapper">
                    <div class="right-nav-link" onclick="window.location.href='./login.html'" id="switch">login</div>
                    <div class="right-nav-link">Become a seller</div>
                    <div class="right-nav-link">more<i class="fa-solid fa-angle-down"></i></div>
                    <div class="right-nav-link"><i class="fa-solid fa-cart-shopping"></i>cart</div>
                    <div class="right-nav-link" id="logout"></div>
                </div>
            </div>
        </div>
        <div class="single-product-container">
            <!-- <div class="single-product-left">
                <div class="sp-inner-left">
                    <div class="sp-inner-left-img">
                        <img src="" alt="">
                    </div>
                    <div class="sp-inner-left-img">
                        <img src="" alt="">
                    </div>
                </div>
                <div class="sp-inner-left">
                    <div class="sp-inner-right-img">
                        <img src="" alt="">
                    </div>
                    
                </div>
            </div>
            <div class="single-product-right">
hi
            </div> -->
        
        
            <div class="product-container" id="productContainer">
                <div class="product">
                    <div class="product-img" id="singleProduct">
                        
                    </div>
                    <div class="product-desc">
                        <div class="pro-brand" id="singleProductBrand"></div>
                        <div class="pro-name" id="singleProductName"></div>
                        <div class="pro-color" id="singleProductColor"></div>
                        <div class="pro-assure-img">
                            <img src="https://static-assets-web.flixcart.com/fk-p-linchpin-web/fk-cp-zion/img/fa_62673a.png"
                                alt="">
                        </div>
                        <div class="pro-price-section">
                            <span class="real-price" id="total-price"></span>
                            <span class="del-price"><del>4500</del></span>
                            <span class="off">12% off</span>
                        </div>
                        <div class="pro-size">Size <span>XS,S,M,L,XL,XXL</span></div>
                        <div id="forAddToCart"></div>
                    </div>
                </div>
            </div>

        </div>


    </div>


    <script>
        window.onload = function () {
          // alert("CKJAN")

        // alert("working")
        var currentUser = JSON.parse(localStorage.getItem("flipcartCurrentUser"))
        // console.log(currentUser,"currentUser");
        if (!!currentUser) {
            // alert(currentUser.namee)
            var logoutDiv = document.getElementById("logout");
            var divFromHtml = document.getElementById("switch");
            // console.log(divFromHtml,"divFromHtml");
            // var h1 = document.createElement("h1");
            // h1.innerText = "madhuri"
            // divFromHtml.append(h1)
            var button = '<div onclick="logout() " ><i class="fa-solid fa-arrow-right-from-bracket"></i>Logout</div>'
            var name = `<p> ${currentUser.namee}</p>`;
            divFromHtml.innerHTML = name;
            logoutDiv.innerHTML = button;
        }
            // else{
            //     alert("current user absent")
            // }


            var product = JSON.parse(localStorage.getItem("flipcart-current-product"));

            var divToAppendProduct = document.getElementById("singleProduct");
            var divToAppendProductName = document.getElementById("singleProductName");
            var divToAppendProductBrand = document.getElementById("singleProductBrand");
            var divToAppendProductColor = document.getElementById("singleProductColor");
            var divToAppendProductPrice = document.getElementById("total-price");
            var divForAddToCart = document.getElementById("forAddToCart");


            var structure = `<img src='${product.proImage}' class="got-image" />`
            var productName = `${product.proName}`
            var productPrice = `â‚¹${product.proPrice}`
            var productBrand = `${product.proBrand}`
            var productColor = `${product.proColor}`
            var addToCart = `
            <div class="btn-section" id="forAddToCart">
                            <button onclick='addCart(${JSON.stringify(product)})' class="cart-btn"><span><i class="fa-solid fa-bag-shopping"></i></span> add to
                            bag</button>
                    </div>`

            console.log(structure, "here");
            divToAppendProduct.innerHTML = structure;
            divToAppendProductName.innerHTML = productName;
            divToAppendProductBrand.innerHTML = productBrand;
            divToAppendProductColor.innerHTML = productColor;
            divToAppendProductPrice.innerHTML = productPrice;
            divForAddToCart.innerHTML = addToCart;

        }
        function logout() {
            alert("We will miss you..")
            localStorage.removeItem("flipcartCurrentUser");
            window.location.reload();
        }
        function addCart(product) {
            // alert("Adding to cart")
            var currentUser = JSON.parse(localStorage.getItem("flipcartCurrentUser"))
            // console.log(currentUser.email);
            var userData = JSON.parse(localStorage.getItem("flipcartUsers"))
            var flafForUser = false;
            for(var i=0; i<userData.length; i++){
                if(currentUser.useremail === userData[i].useremail){
                    // alert("got")
                    if(userData[i].cartProducts == undefined){
                        userData[i].cartProducts = [product];
                    }else{
                        userData[i].cartProducts.push(product)
                    }
                    alert("Product added to cart.")
                    window.location.href = './cart.html'
                }
            }
            localStorage.setItem("flipcartUsers",JSON.stringify(userData))
        }
    </script>
    <script src="./main.js"></script>
</body>

</html>